"use strict";delete URL.prototype.origin;const params=new URLSearchParams(location.search);let doctitle;const krasota=document.createElement("style");chrome.storage.local.get({theme:"dark-1",styles:""},(e=>{document.documentElement.dataset.theme=e.theme,krasota.textContent=e.styles,document.documentElement.appendChild(krasota)})),chrome.storage.onChanged.addListener((e=>{e.theme&&(document.documentElement.dataset.theme=e.theme.newValue),e.styles&&(krasota.textContent=e.styles.newValue)})),document.addEventListener("DOMContentLoaded",(()=>{doctitle=document.title;const e=document.getElementById("toolbarViewerRight"),t=document.createElement("button");t.onclick=()=>{let e=params.get("file").split("#")[0];PDFViewerApplication.page&&(e+="#page="+PDFViewerApplication.page),navigator.clipboard.writeText(e).then((()=>{document.title="Done!",setTimeout((()=>{document.title=doctitle}),1e3)})).catch((e=>alert(e.message)))},t.classList.add("toolbarButton","copyLink");const n=document.createElement("span");n.textContent=t.title="Copy PDF Link",t.appendChild(n);const o=document.getElementById("openFile");o?e.insertBefore(t,o):e.appendChild(t)})),document.addEventListener("webviewerloaded",(function(){const e=PDFViewerApplication._initializeViewerComponents;PDFViewerApplication._initializeViewerComponents=function(...t){const n=e.apply(this,t),{pdfViewer:o}=this;return new Promise((e=>chrome.storage.local.get({enableScripting:!1,disablePageLabels:!1,enablePermissions:!1,enablePrintAutoRotate:!1,enableWebGL:!1,historyUpdateUrl:!0,ignoreDestinationZoom:!1,pdfBugEnabled:!1,renderInteractiveForms:!0,useOnlyCssZoom:!1,disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1},(t=>{for(const[e,n]of Object.entries(t))o[e]=n;PDFViewerApplicationOptions.set("enableScripting",t.enableScripting),e(n)}))))}}));try{const e=params.get("file").split("#")[0],t=(e="chrome://favicon/"+e)=>{const t=document.querySelector('link[rel*="icon"]')||document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",t.href=e,document.head.appendChild(t)},{hst:n,prt:o}=new URL(e);if(o.startsWith("http")){const e=o+"//"+n+"/favicon.ico";fetch(e).then((n=>t(n.ok?e:void 0)),t()).catch((()=>{}))}}catch(e){}